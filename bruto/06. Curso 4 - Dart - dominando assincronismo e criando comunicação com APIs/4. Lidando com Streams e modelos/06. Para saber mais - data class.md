## Para saber mais: data class

Em linguagens de **programação orientadas a objetos**, como Dart, é comum a **necessidade de representar entidades do mundo real em classes**. Essas classes **frequentemente armazenam dados** e **contêm métodos que operam sobre esses dados**.

No contexto do Dart, **as classes que são usadas principalmente para armazenar dados são conhecidas como data classes** ("classe de dados", em inglês), que também **costumeiramente chamamos de models** ("modelos", em inglês) a depender do padrão de projeto utilizado.

Uma **data class** é uma classe projetada para **conter apenas dados**, **sem a complexidade de comportamentos significativos**.

No Dart, **você pode criar uma data class manualmente, especificando atributos e implementando métodos úteis** como `copyWith`, `toString`, `hashCode`, `==`, entre outros. Abaixo, discutiremos esses métodos e outros importantes que você pode adicionar ao seu model:

### 1. Construtor principal e auxiliares

**Um constructor é um método especial usado para criar instâncias de uma classe**.

No Dart, o **uso de construtores nomeados é comum** para **fornecer diferentes maneiras de inicializar objetos**, **como o `fromMap` e `fromJson`**.

Eles permitem **criar instâncias de classes a partir de mapas (`Map`) ou strings JSON**.

```dart
Account({
  required this.id,
  required this.name,
  required this.lastName,
  required this.balance,
});

factory Account.fromMap(Map<String, dynamic> map) {
  return Account(
    id: map['id'] as String,
    name: map['name'] as String,
    lastName: map['lastName'] as String,
    balance: map['balance'] as double,
  );
}

factory Account.fromJson(String source) =>
    Account.fromMap(json.decode(source) as Map<String, dynamic>);
```

### 2. Método `toMap` e `toJson`

Esses métodos **são cruciais para a conversão de objetos em mapas e JSON**, **formatos frequentemente utilizados para armazenar e transferir dados**.

No exemplo, **`toMap` converte o objeto `Account` em um mapa**, que pode ser facilmente convertido em JSON através do método `toJson`.

```dart
Map<String, dynamic> toMap() {
  return <String, dynamic>{
    'id': id,
    'name': name,
    'lastName': lastName,
    'balance': balance,
  };
}

String toJson() => json.encode(toMap());
```

### 3. Método `copyWith`

É um método comum em data classes que **facilita a criação de uma cópia de um objeto com algumas alterações**. Esse método é particularmente útil **quando você deseja modificar um ou mais atributos de um objeto existente sem afetar o original**.

```dart
Account copyWith({
  String? id,
  String? name,
  String? lastName,
  double? balance,
}) {
  return Account(
    id: id ?? this.id,
    name: name ?? this.name,
    lastName: lastName ?? this.lastName,
    balance: balance ?? this.balance,
  );
}
```

### 4. Métodos `toString`, `==` e `hashCode`

- O método `toString` fornece uma **representação textual de um objeto**, útil para **debugging**.

- O operador `==` e o método `hashCode` são fundamentais para a **comparação de objetos**. O Dart os usa para determinar se duas instâncias de uma classe são iguais.

```dart
@override
String toString() {
  return '\\nConta $id\\n$name $lastName\\nSaldo: $balance\\n';
}

@override
bool operator ==(covariant Account other) {
  if (identical(this, other)) return true;

  return other.id == id &&
      other.name == name &&
      other.lastName == lastName &&
      other.balance == balance;
}

@override
int get hashCode {
  return id.hashCode ^ name.hashCode ^ lastName.hashCode ^ balance.hashCode;
}
```

### Para saber (ainda) mais

No Dart, ao contrário de outras linguagens, **não existe um recurso nativo para geração automática de data classes**. E isso pode ser bem chato ao começar um novo projeto que exige a escrita de dezenas dessa classes.

No entanto, **existem ferramentas que facilitam essa tarefa**, tanto internas (como pacotes) quanto externas (como extensões para o VSCode).

### `Freezed`

Uma solução disponível no próprio [pub.dev](https://pub.dev/packages/freezed) e com o **selo de Flutter Favorite** é o pacote `freezed`, que **permite a criação de data classes com menos código repetitivo**.

**O `freezed` usa anotações para gerar automaticamente métodos como `copyWith`, `toJson`, `fromJson`, `==`, e `hashCode`**. Ele é configurável e integra-se bem ao ecossistema Dart, garantindo que todas as práticas recomendadas sejam seguidas. Essa ferramenta é ideal para **projetos que necessitam de flexibilidade e automação na geração de classes de dados**.

Apesar de em um primeiro momento ter uma configuração mais complicada, exigindo preparar seu projeto para geração automática de código, o Freezed **propõe um código mais enxuto e seguro usando apenas Dart**.

### `Dart data class generator`

Por outro lado, uma solução externa e mais direta é a **extensão do VSCode** chamada [Dart Data Class Generator (hzgood)](https://marketplace.visualstudio.com/items?itemName=hzgood.dart-data-class-generator). Essa extensão permite gerar métodos como `copyWith`, `toJson`, `fromJson`, `==`, e `hashCode` diretamente no editor, com um simples comando. **Embora não seja tão configurável quanto o `freezed`**, a extensão é **bem prática para quem busca rapidez e simplicidade** na criação de data classes.

Contudo, por ser uma extensão do VSCode externa ao código Dart, essa solução pode apresentar mais inconsistências e **exigir um maior nível de verificação**.

Você pode explorar mais sobre o pacote `freezed` na [documentação oficial](https://pub.dev/packages/freezed) e sobre a extensão `Dart Data Class Generator` na [página da extensão](https://marketplace.visualstudio.com/items?itemName=hzgood.dart-data-class-generator).