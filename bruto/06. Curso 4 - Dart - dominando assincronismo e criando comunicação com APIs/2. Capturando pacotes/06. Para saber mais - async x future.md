## Para saber mais: async x future

No Dart, ao trabalhar com **operações assíncronas**, existem **duas abordagens** que podemos destacar: 

- **O uso de `then`**, que é um método de `Future`,
- **O uso de `await`** em conjunto com `async` no escopo do método ou da função.

**Ambas permitem a manipulação de objetos do tipo `Future`**, mas possuem diferenças significativas em termos de legibilidade e controle do fluxo do código!

Bora explorar cada um para entender direitinho! :D

### `then`

Quando utilizamos o método `then`, estamos anexando uma **função callback que é agendada e só será executada quando o `Future` for completado** com sucesso. Essa abordagem é bastante útil para casos simples ou quando precisamos **encadear várias operações assíncronas**.

No entanto, o código pode rapidamente se tornar **difícil de ler**, especialmente se houver muitas operações assíncronas ou tratamentos de erros.

```dart
Future<void> fetchData() {
  getDataFromServer().then((data) {
    print('Dados recebidos: $data');
  });
}
```

### `await` e `async`

Por outro lado, utilizando `await` dentro de uma função ou método marcado como `async`, podemos **escrever código assíncrono de maneira que se pareça com código síncrono**, o que *melhora a legibilidade e manutenção do código*.

Ou seja, com `await`, a **execução da função é pausada** **até que o `Future` seja completado**, e em seguida, prossegue com a próxima linha.

Essa abordagem muitas vezes é *mais fácil de entender e gerenciar*, especialmente quando precisamos tratar erros de maneira mais controlada.

```dart
Future<void> fetchData() async {
  try {
    final data = await getDataFromServer();
    print('Dados recebidos: $data');
  } catch (error) {
    print('Erro ao buscar dados: $error');
  }
}
```

### Qual usar?

A escolha entre `then` e `await` **depende completamente do contexto e dos seus objetivos** com aquele código, não há uma resposta perfeita.

O uso de `then` pode ser mais direto para **fluxos simples** e onde **callbacks aninhados são necessários**. Há situações também que queremos evitar tornar o escopo (função ou método) assíncrono, então nesses casos o then será útil.

Já o `await` é geralmente preferido quando buscamos um **código mais legível e fácil de manter**.

Para saber (ainda) recomendo a leitura da documentação oficial do Dart que aprofunda no tema e traz exemplos práticos de uso:

- [Future class | Dart (em inglês)](https://api.flutter.dev/flutter/dart-async/Future-class.html);
- [dart:async | Dart (em inglês)](https://dart.dev/libraries/dart-async);
- [Asynchronous programming: futures, async, await | Dart (em inglês)](https://dart.dev/libraries/async/async-await).
